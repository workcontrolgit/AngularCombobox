<div class="container-fluid">
  <div class="jumbotron text-center">
    <h1>
      <span>Reactive Form Demo</span>
    </h1>
  </div>

  <form [formGroup]="frm" (ngSubmit)="onPost()">

    <div class="card mb-3">
      <div class="card-header">
        <h4>Movie Rating</h4>
      </div>
      <div class="card-body">
        <div class="form-group">
          <label for="selectedMovie" class="card-title d-flex flex-wrap align-items-center">Movie
            <button type="button" class="btn btn-link" placement="top" ngbTooltip="The movie search and selection feature is powered by the ng-select component.">
              <i class="fas fa-info-circle"></i>
            </button>
          </label>

          <ng-select [items]="movies$ | async" bindLabel="Title" [trackByFn]="trackByFn" [minTermLength]="minLengthTerm"
            [loading]="searching" typeToSearchText="Please enter {{minLengthTerm}} or more characters"
            [typeahead]="searchingText$" [(ngModel)]="selectedMovie" formControlName="selectedMovie">
            <ng-template ng-option-tmp let-item="item" let-index="index" let-search="searchTerm">
              <div class="row">
                <div class="col-sm-2">
                  <img *ngIf="item.Poster !=='N/A'" class="img-thumbnail" src="{{item.Poster}}" alt="Card image cap">
                </div>
                <div class="col-sm-10">
                  <h5 class="card-title">{{item.Title}}</h5>
                  <h6 class="card-subtitle mb-2 text-muted">Year: {{item.Year}}</h6>
                  <ul class="list-group list-group-flush">
                    <li class="list-group-item">imdbID: {{item.imdbID}}</li>
                    <li class="list-group-item">Type: {{item.Type}}</li>
                    <li class="list-group-item">Poster: {{item.Poster}}</li>
                  </ul>
                </div>
              </div>
            </ng-template>
          </ng-select>
          <small [hidden]="f.selectedMovie.valid || f.selectedMovie.untouched" class="text-danger" translate>
            Movie is required
          </small>
        </div>
        <div class="form-group">
        <label for="selectedRating" class="card-title d-flex flex-wrap align-items-center">Rating
          <button type="button" class="btn btn-link" placement="top" ngbTooltip="The rating feature is powered by the ng-boostrap rating component.">
            <i class="fas fa-info-circle"></i>
          </button>
        </label>
        <ngb-rating [(rate)]="defaultRate"  class="form-control" formControlName="selectedRating"></ngb-rating>
      </div>

      </div>

      <div class="card-footer">
        <button class="btn btn-primary" type="submit" [disabled]="frm.invalid">Save</button>
      </div>
    </div>


  </form>
  <div *ngIf="isSubmitted" class="message">
    {{frm.value | json}}

  </div>

</div>
